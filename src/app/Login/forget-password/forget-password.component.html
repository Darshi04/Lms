<section class="vh-100">
  <div class="container-fluid h-custom">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-md-9 col-lg-6 col-xl-5">
        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp" class="img-fluid" alt="Sample image">
      </div>
      <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
        <div class="d-flex flex-row align-items-center justify-content-center justify-content-lg-start">
          <p class="lead fw-normal mb-0 me-3">Who Are You?</p>
          <button type="button" (click)="selectRole('student')" 
                  [ngClass]="{'selected': role === 'student'}" class="btn btn-primary btn-floating mx-1">
            Student
          </button>
          <button type="button" (click)="selectRole('manager')" 
                  [ngClass]="{'selected': role === 'manager'}" class="btn btn-primary btn-floating mx-1">
            Manager
          </button>
          <button type="button" (click)="selectRole('trainer')" 
                  [ngClass]="{'selected': role === 'trainer'}" class="btn btn-primary btn-floating mx-1">
            Trainer
          </button>
        </div>
        <div class="bg-white p-4 p-md-5 rounded shadow-sm paa">
          <div *ngIf="!emailSubmitted"> 
            <div class="row">
              <div class="col-12">
                <div class="mb-5">
                  <h2 class="h3">Password Reset</h2>
                  <h3 class="fs-6 fw-normal text-secondary m-0">Provide the email address associated with your account to recover your password.</h3>
                </div>
              </div>
            </div>

            <form (ngSubmit)="onEmailSubmit()">
              <div class="row gy-3 gy-md-4 overflow-hidden">
                <div class="col-12">
                  <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                  <input type="email" [(ngModel)]="email" name="email" id="email" placeholder="name@example.com" required class="form-control">
                </div>
                <div class="col-12">
                  <div class="d-grid">
                    <button class="btn btn-lg btn-primary" type="submit" style="opacity: 1;">Reset Password</button>
                  </div>
                </div>
              </div>
            </form>

          </div>

          
          <div *ngIf="emailSubmitted"> 
            <div class="row">
              <div class="col-12">
                <div class="mb-5">
                  <h2 class="h3">Set New Password</h2>
                  <h3 class="fs-6 fw-normal text-secondary m-0">Enter your new password below.</h3>
                </div>
              </div>
            </div>

            <form (ngSubmit)="onSetPasswordSubmit()">
              <div class="row gy-3 gy-md-4 overflow-hidden">
                <div class="col-12">
                  <label for="newPassword" class="form-label">New Password <span class="text-danger">*</span></label>
                  <input type="password" [(ngModel)]="newPassword" name="newPassword" id="newPassword" placeholder="Enter new password" required class="form-control">
                </div>
                <div class="col-12">
                  <label for="confirmPassword" class="form-label">Confirm Password <span class="text-danger">*</span></label>
                  <input type="password" [(ngModel)]="confirmPassword" name="confirmPassword" id="confirmPassword" placeholder="Confirm new password" required class="form-control">
                </div>
                <div class="col-12">
                  <div class="d-grid">
                    <button class="btn btn-lg btn-primary" type="submit" style="opacity: 1;">Set New Password</button>
                  </div>
                </div>
              </div>
            </form>

          </div>

          
          <div class="row">
            <div class="col-12">
              <hr class="mt-5 mb-4 border-secondary-subtle">
              <div class="d-flex gap-4 justify-content-end">
                <a href="#!" class="link-secondary text-decoration-none">Login</a>
              </div>
            </div>
          </div>

          
          <div *ngIf="message" class="mt-3">
            <div class="alert" [ngClass]="{'alert-success': message.includes('successfully'), 'alert-danger': message.includes('error') || message.includes('Please') }">
              {{ message }}
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>