<div class="tables-wrapper mt-5">
    <div class="row">
      <div class="col-lg-12">
        <div class="card-style mb-30">
          <h6 class="mb-10">Marks Table</h6>
          
          <!-- Trainer Selection -->
          <p>Select the Trainer Id</p>
          <select [(ngModel)]="selectedTrainerId" (change)="fetchStudents(); fetchMarks()">
            <option value="TR1234">TR1234</option>
            <option value="TR5678">TR5678</option>
          </select>
          
          <!-- Subject Selection -->
          <p>Select the Subject</p>
          <select [(ngModel)]="selectedSubject" (change)="fetchMarks()">
            <option value="Java core">Java core</option>
            <option value="Data Structures">Data Structures</option>
            <option value="Cloud Computing">Cloud Computing</option>
            <option value="Linux">Linux</option>
          </select>
          
          <!-- Student Type Selection -->
          <p>Select the Student Type</p>
          <select [(ngModel)]="selectedStudentType" (change)="fetchMarks()">
            <option value="AllStudent">All Students</option>
            <option value="ReAttempt">ReAttempt Students</option>
          </select>
  
          <!-- Displaying the fetched marks (for reattempt) -->
          <div *ngIf="marklists.length > 0 && !noMarksFound">
            <h6>Marks Table for {{ selectedSubject }}:</h6>
            <div class="table-wrapper table-responsive">
              <table class="table table-bordered table-striped">
                <thead>
                  <tr>
                    <th>Student ID</th>
                    <th>Marks</th>
                    <th>Edit Date</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let student of marklists">
                    <td>{{ student.stdent_id }}</td>
                    <td><input [(ngModel)]="student.mark" type="number"></td>
                    <td>{{ student.edit_date }}</td>
                  </tr>
                </tbody>
              </table>
              <button style="margin-left: 1000px;" (click)="attemptMarks()">Publish Marks</button>
            </div>
          </div>
  
          <!-- No Marks Published Yet (for new marks) -->
          <div *ngIf="marklists.length === 0 && studentIds.length > 0 && !noMarksFound">
            <!-- <h6>Student IDs for {{ selectedSubject }} (No Marks Published Yet):</h6>
            <ul>
              <li *ngFor="let id of studentIds">{{ id }}</li>
            </ul> -->
  
            <div class="table-wrapper table-responsive">
              <table class="table table-bordered table-striped">
                <thead>
                  <tr>
                    <th>Student ID</th>
                    <th>Marks</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let id of studentIds">
                    <td>{{ id }}</td>
                    <td>
                      <input
                        type="number"
                        [(ngModel)]="marksMap[id]"
                        placeholder="Enter Marks"
                        name="mark-{{ id }}"
                      />
                    </td>
                  </tr>
                </tbody>
              </table>
              <button style="margin-left: 1000px;" (click)="publishMarks()">Publish Marks</button>
            </div>
          </div>
  
          <!-- Display No marks found message -->
          <div *ngIf="noMarksFound">
            <h6>No marks found for students.</h6>
          </div>
        </div>
      </div>
    </div>
  </div>
